<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://resource.tinychen.com/logos.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://resource.tinychen.com/logos.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://resource.tinychen.com/logos.png">
  <link rel="mask-icon" href="https://resource.tinychen.com/logos.png" color="#222">
  <link rel="alternate" href="/atom.xml" title="TinyChen's Studio" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-material.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://tinychen.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="nginx的编译安装、添加模块、yum安装、简单配置、默认目录作用和静态页面配置。">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx篇01——基本安装配置和静态页面设置">
<meta property="og:url" content="https://tinychen.com/20200317-nginx01-base-conf-static-web/index.html">
<meta property="og:site_name" content="TinyChen&#39;s Studio">
<meta property="og:description" content="nginx的编译安装、添加模块、yum安装、简单配置、默认目录作用和静态页面配置。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://resource.tinychen.com/20210110180324.jpg">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200324/XBFWbitOjxxu.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200324/yCV4ewKcJh8E.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200324/0wsDPdjxSyL6.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200324/K86pzHvKgi61.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/oVhLjc6gtrUu.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/3f4pVwyJKKz8.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/vrTFVgW4tsi4.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/YjtkNXpqb702.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/shQqNYJuU4vW.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/zUthGtH2nWfK.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/vJhEEkDYRGVw.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/2vUn1KmtJfeJ.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/V9SN9w4cYpqG.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/nrgXs9YImesb.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/NDKJhkhoG0vG.png">
<meta property="og:image" content="https://resource.tinychen.com/blog/20200317/FPrVs7UyolQD.png">
<meta property="article:published_time" content="2020-03-17T03:00:00.000Z">
<meta property="article:modified_time" content="2020-03-17T03:00:00.000Z">
<meta property="article:author" content="TinyChen">
<meta property="article:tag" content="web">
<meta property="article:tag" content="nginx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://resource.tinychen.com/20210110180324.jpg">

<link rel="canonical" href="https://tinychen.com/20200317-nginx01-base-conf-static-web/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Nginx篇01——基本安装配置和静态页面设置 | TinyChen's Studio</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166769908-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-166769908-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7a96963a1145ac7fde1442d739a11ffd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">TinyChen's Studio</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">DO or DIE</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://tinychen.com/20200317-nginx01-base-conf-static-web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://resource.tinychen.com/logo.jpg">
      <meta itemprop="name" content="TinyChen">
      <meta itemprop="description" content=" ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TinyChen's Studio">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Nginx篇01——基本安装配置和静态页面设置
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-17 11:00:00" itemprop="dateCreated datePublished" datetime="2020-03-17T11:00:00+08:00">2020-03-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/frontend/" itemprop="url" rel="index">
                    <span itemprop="name">frontend</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>8.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>8 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://resource.tinychen.com/20210110180324.jpg"></p>
<p>nginx的编译安装、添加模块、yum安装、简单配置、默认目录作用和静态页面配置。</p>
<a id="more"></a>

<h1 id="0、编译安装nginx"><a href="#0、编译安装nginx" class="headerlink" title="0、编译安装nginx"></a>0、编译安装nginx</h1><h2 id="0-1-准备工作"><a href="#0-1-准备工作" class="headerlink" title="0.1 准备工作"></a>0.1 准备工作</h2><p>这里我们使用nginx的mainline版本的1.17.9来进行编译安装，nginx各版本的官网下载地址：<a target="_blank" rel="noopener" href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p>
<p>首先我们下载并解压nginx源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.17.9.tar.gz</span><br><span class="line">tar -zxvf nginx-1.17.9.tar.gz</span><br></pre></td></tr></table></figure>

<p>在编译安装之前我们还需要先安装几个别的软件：</p>
<ul>
<li><p>GCC/G++编译器：GCC（GNU Compiler Collection）可用来编译C语言程序，如果你还需要使用C++来编写Nginx HTTP模块，这时还需要用到G++编译器了。</p>
</li>
<li><p>PCRE库：PCRE（Perl Compatible Regular Expressions，Perl兼容正则表达式）是由Philip Hazel开发的函数库，目前为很多软件所使用，该库支持正则表达式。实际上在nginx的很多高级配置中都会用到正则表达式，因此我们在编译Nginx时尽量先把PCRE库编译进Nginx。</p>
</li>
<li><p>zlib库：zlib库用于对HTTP包的内容做gzip格式的压缩，我们可以在nginx.conf里配置了gzip on，并指定对于某些类型（content-type）的HTTP响应使用gzip来进行压缩以减少网络传输量。</p>
</li>
<li><p>OpenSSL开发库：HTTPS必备，这个就不用解释了</p>
<p>上面提到的库我们都可以使用yum来进行安装：</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> pcre-devel是使用PCRE做二次开发时所需要的开发库，包括头文件等，这也是编译Nginx所必须使用的。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 同理，zlib是直接使用的库，zlib-devel是二次开发所需要的库。</span></span><br></pre></td></tr></table></figure>

<p>Nginx是高度自由化的Web服务器，它的功能是由许多模块来支持的。而这些模块可根据我们的使用需求来定制，如果某些模块不需要使用则完全不必理会它。同样，如果使用了某个模块，而这个模块使用了一些类似zlib或OpenSSL等的第三方库，那么就必须先安装这些软件。</p>
<h2 id="0-2-编译安装"><a href="#0-2-编译安装" class="headerlink" title="0.2 编译安装"></a>0.2 编译安装</h2><p>我们进入nginx的目录，输入下面的指令可以查看各类的编译参数，或者在<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/configure.html">官网</a>也可以看到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --help</span><br></pre></td></tr></table></figure>

<p>我们这里使用的参数是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --sbin-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx --conf-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf --pid-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.pid --with-http_ssl_module</span><br></pre></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/blog/20200324/XBFWbitOjxxu.png"></p>
<p>这里我们可以看到，我们在参数里面并没有指定上面提到的几个库的目录，configure文件会默认系统已经安装的库版本和目录，当然我们也可以手动指定某个库的目录来指定版本。</p>
<p>接下来进行make安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>如无意外此时应该已经正常安装好了，我们到前面指定的安装目录看一下</p>
<p><img src="https://resource.tinychen.com/blog/20200324/yCV4ewKcJh8E.png"></p>
<p>注意这个时候我们如果需要使用nginx需要指定这个安装目录，想要全局使用我们可以创建一个软链接：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/nginx/nginx /usr/sbin/nginx</span><br></pre></td></tr></table></figure>



<h2 id="0-3-添加模块"><a href="#0-3-添加模块" class="headerlink" title="0.3 添加模块"></a>0.3 添加模块</h2><p>同时，如果之后有需要用到的模块而在编译安装的时候忘了安装也没关系，我们可以继续编译添加新模块</p>
<p>首先我们需要查看已经编译的参数:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# nginx -V</span><br><span class="line">nginx version: nginx/1.17.9</span><br><span class="line">built by gcc 4.4.7 20120313 (Red Hat 4.4.7-23) (GCC) </span><br><span class="line">built with OpenSSL 1.0.1e-fips 11 Feb 2013</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --sbin-path=/usr/local/nginx/nginx --conf-path=/usr/local/nginx/nginx.conf --pid-path=/usr/local/nginx/nginx.pid --with-http_ssl_module</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要注意上面的V是大写的V</p>
</blockquote>
<p>在<code>configure arguments:</code> 这一栏里面我们就可以看到之前编译的时候的参数，对比上面的记录我们可以看到是一模一样的，然后我们会到之前下载的源码目录，<strong>注意是源码的目录不是安装的目录</strong>，然后添加上之前的编译参数，再添加新的模块，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --sbin-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx --conf-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf --pid-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.pid --with-http_ssl_module --with-http_v2_module --with-mail --with-mail_ssl_module</span><br></pre></td></tr></table></figure>

<p>比如这里我们添加了<code>http_v2</code>、<code>mail</code>、<code>mail_ssl</code>三个模块</p>
<p>如果想要添加第三方模块的话，只需要使用<code>--add-module=</code>然后加上第三方模块的路径即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--add-module=/home/echo-nginx-module-0.61</span><br></pre></td></tr></table></figure>

<p>最后我们的编译参数是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--sbin-path=/usr/local/nginx/nginx \</span><br><span class="line">--conf-path=/usr/local/nginx/nginx.conf \</span><br><span class="line">--pid-path=/usr/local/nginx/nginx.pid \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-http_v2_module \</span><br><span class="line">--with-mail \</span><br><span class="line">--with-mail_ssl_module \</span><br><span class="line">--add-module=/home/echo-nginx-module-0.61</span><br></pre></td></tr></table></figure>

<p>接着我们使用make安装，再查看目录会发现原来的文件已经被替换成<code>*.default</code>了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/blog/20200324/0wsDPdjxSyL6.png"></p>
<p>最后我们再确定一下是否安装成功：</p>
<p><img src="https://resource.tinychen.com/blog/20200324/K86pzHvKgi61.png"></p>
<h1 id="1、yum安装nginx"><a href="#1、yum安装nginx" class="headerlink" title="1、yum安装nginx"></a>1、yum安装nginx</h1><h2 id="1-1-yum仓库建立和安装配置"><a href="#1-1-yum仓库建立和安装配置" class="headerlink" title="1.1 yum仓库建立和安装配置"></a>1.1 yum仓库建立和安装配置</h2><p>centos自带的repo中就有nginx，可以直接安装，但是版本比较旧，想要使用yum进行安装最新的稳定版本，我们需要自行配置yum仓库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line">module_hotfixes=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[nginx-mainline]</span><br><span class="line">name=nginx mainline repo</span><br><span class="line">baseurl=http://nginx.org/packages/mainline/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line">module_hotfixes=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>默认情况下mainline版本是不会启用的，因此我们如果需要安装mainline版本的nginx则需要手动启用这个repo。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install yum-utils</span><br><span class="line">yum-config-manager --<span class="built_in">enable</span> nginx-mainline</span><br><span class="line">yum clean all</span><br><span class="line">yum repolist</span><br><span class="line">yum install nginx</span><br></pre></td></tr></table></figure>

<p>安装的时候需要注意这个列出信息中的repo应该是我们刚刚新建的repo。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/oVhLjc6gtrUu.png"></p>
<p>安装完成之后需要设置开机启动和防火墙放行80端口，如果使用https还需要放行443端口。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx </span><br><span class="line">systemctl start nginx </span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=80/tcp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=443/tcp</span><br><span class="line">firewall-cmd --reload </span><br></pre></td></tr></table></figure>

<p>接下来我们可以测试一下安装和启动是否成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br><span class="line">curl 127.0.0.1</span><br></pre></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/blog/20200317/3f4pVwyJKKz8.png"></p>
<h2 id="1-2-master和worker进程"><a href="#1-2-master和worker进程" class="headerlink" title="1.2 master和worker进程"></a>1.2 master和worker进程</h2><p>使用ps命令查看进程，我们可以看到有一个master进程和一个worker进程，默认情况下，worker的进程数量为1，实际上我们可以根据具体需要对其进行修改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/blog/20200317/vrTFVgW4tsi4.png"></p>
<p>在正式提供服务的产品环境下，<strong>部署Nginx时都是使用一个master进程来管理多个worker进程，一般情况下，worker进程的数量与服务器上的CPU核心数相等</strong>。每一个worker进程都是繁忙的，它们在真正地提供互联网服务，master进程则很“清闲”，只负责监控管理worker进程。worker进程之间通过共享内存、原子操作等一些进程间通信机制来实现各种功能。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/YjtkNXpqb702.png"></p>
<h1 id="2、nginx基本配置"><a href="#2、nginx基本配置" class="headerlink" title="2、nginx基本配置"></a>2、nginx基本配置</h1><h2 id="2-1-nginx默认目录"><a href="#2-1-nginx默认目录" class="headerlink" title="2.1 nginx默认目录"></a>2.1 nginx默认目录</h2><h3 id="etc-nginx"><a href="#etc-nginx" class="headerlink" title="/etc/nginx/"></a><code>/etc/nginx/</code></h3><p>这个是nginx服务器的默认配置目录</p>
<p><img src="https://resource.tinychen.com/blog/20200317/shQqNYJuU4vW.png"></p>
<h3 id="etc-nginx-nginx-conf"><a href="#etc-nginx-nginx-conf" class="headerlink" title="/etc/nginx/nginx.conf"></a><code>/etc/nginx/nginx.conf</code></h3><p>这个是nginx服务器的默认配置文件，我们可以在这里对nginx的所有全局配置进行修改，包括线程数端口号等等，同时在默认情况下它也包括了下述的<code>/etc/nginx/conf.d/</code>目录中的所有配置文件。</p>
<h3 id="etc-nginx-conf-d"><a href="#etc-nginx-conf-d" class="headerlink" title="/etc/nginx/conf.d/"></a><code>/etc/nginx/conf.d/</code></h3><p>这个目录中包含的<code>.conf</code>配置文件主要用于单独定义某个http网页，从而使得整个配置目录文件的管理变得更加简洁而清晰。</p>
<h3 id="var-log-nginx"><a href="#var-log-nginx" class="headerlink" title="/var/log/nginx"></a><code>/var/log/nginx</code></h3><p>这个目录是默认的log日志目录，主要有<code>acces.log</code>和<code>error.log</code>两个文件，前者负责记录每一个被访问的记录，后者负责记录访问中出现的错误。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/zUthGtH2nWfK.png"></p>
<h2 id="2-2-nginx命令"><a href="#2-2-nginx命令" class="headerlink" title="2.2 nginx命令"></a>2.2 nginx命令</h2><p>输入<code>nginx -h</code>即可查看所有指令，不需要特意去记忆，用多了就自然记住了。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/vJhEEkDYRGVw.png"></p>
<h1 id="3、nginx-conf文件"><a href="#3、nginx-conf文件" class="headerlink" title="3、nginx.conf文件"></a>3、nginx.conf文件</h1><p>我们把整个全局配置文件拿出来分析一下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">user  nginx;</span><br><span class="line">worker_processes  16;</span><br><span class="line"></span><br><span class="line">error_log  /var/<span class="built_in">log</span>/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                      <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                      <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br><span class="line"></span><br><span class="line">    access_log  /var/<span class="built_in">log</span>/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-1-user"><a href="#3-1-user" class="headerlink" title="3.1 user"></a>3.1 user</h2><p><code>user</code>指的是以哪个用户来创建nginx的<strong>worker进程</strong>，master进程一般都是使用root用户启动，权限较大。</p>
<h2 id="3-2-worker-processes"><a href="#3-2-worker-processes" class="headerlink" title="3.2 worker_processes"></a>3.2 worker_processes</h2><p><code>worker_processes</code>则是nginx的worker进程数量，一般与CPU的核心数量一致，这里我们设置为16。</p>
<h2 id="3-3-error-log"><a href="#3-3-error-log" class="headerlink" title="3.3 error_log"></a>3.3 error_log</h2><p><code>error_log</code>是日志的存放位置和输出等级，等级的取值范围是<code>debug</code>、<code>info</code>、<code>notice</code>、<code>warn</code>、<code>error</code>、<code>crit</code>、<code>alert</code>、<code>emerg</code>，从左至右级别依次增大。当设定为一个级别时，大于或等于该级别的日志都会被输出到记录文件中，小于该级别的日志则不会输出。<strong>这里默认设定的是warn级别</strong>，则<code>warn</code>、<code>error</code>、<code>crit</code>、<code>alert</code>、<code>emerg</code>级别的日志都会输出。</p>
<blockquote>
<p>如果设定的日志级别是<code>debug</code>，则会输出所有的日志，这样数据量会很大，要确保存放日志的硬盘有足够的空间，同时，如果需要开启日志的<code>debug</code>功能，需要在编译安装的时候在<code>configure</code>时加入<code>--with-debug</code>配置项，如果不确定是否开启了<code>debug</code>功能，可以输入<code>nginx -V</code>查看所有的<code>configure arguments</code>。</p>
</blockquote>
<h2 id="3-4-pid"><a href="#3-4-pid" class="headerlink" title="3.4 pid"></a>3.4 pid</h2><p><code>pid</code>是<code>nginx</code>的<code>master</code>进程的<code>pid</code>文件，理论上应该和查找的<code>nginx</code>进程中<code>master</code>进程的<code>PID</code>以及<code>worker</code>进程的<code>PPID</code>一致。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/2vUn1KmtJfeJ.png"></p>
<h2 id="3-5-块配置"><a href="#3-5-块配置" class="headerlink" title="3.5 块配置"></a>3.5 块配置</h2><p>接下来的<code>events</code>和<code>http</code>都是属于模块或者块。最基本的配置项语法格式为<code>配置项名 配置项值1 配置项值2 … ;</code></p>
<ul>
<li>一个配置项以英文分号<code>;</code>结束，中间的值使用空格隔开</li>
<li>块配置项由一个块配置项名和一对大括号组成。</li>
<li>块配置项可以嵌套，内层块直接继承外层块。</li>
<li>当内外层块中的配置发生冲突时，究竟是以内层块还是外层块的配置为准，取决于解析这个配置项的模块。</li>
<li>注释部分使用井号<code>＃</code></li>
</ul>
<p>比如上面的<code>log_format</code>这个配置项，变量需要在前面加上美刀符号<code>$</code>，如果变量之间有空格，需要使用单引号或者双引号避免语法错误，同时引号可以嵌套使用。同时需要注意的是，并不是所有的模块都支持使用变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log_format  main  <span class="string">'$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line">                  <span class="string">'$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line">                  <span class="string">'"$http_user_agent" "$http_x_forwarded_for"'</span>;</span><br></pre></td></tr></table></figure>



<h2 id="3-6-单位"><a href="#3-6-单位" class="headerlink" title="3.6 单位"></a>3.6 单位</h2><p>当指定空间大小时，可以使用的单位包括：</p>
<ul>
<li>K或者k千字节（KiloByte，KB）</li>
<li>M或者m兆字节（MegaByte，MB）</li>
</ul>
<p>当指定时间时，可以使用的单位包括：</p>
<ul>
<li>ms（毫秒）</li>
<li>s（秒）</li>
<li>m（分钟）</li>
<li>h（小时）</li>
<li>d（天）</li>
<li>w（周，7天）</li>
<li>M（月，30天）</li>
<li>y（年，365天）</li>
</ul>
<p>单位之间支持混合使用，如<code>1h30m</code>即为<code>90m</code>如果不指定后缀，那么默认使用<code>s（秒）</code>作为单位。</p>
<p>配置项后的值究竟是否可以使用这些单位，取决于解析该配置项的模块。如果这个模块使用了Nginx框架提供的相应解析配置项方法，那么配置项值才可以携带单位。</p>
<h1 id="4、nginx配置静态页面"><a href="#4、nginx配置静态页面" class="headerlink" title="4、nginx配置静态页面"></a>4、nginx配置静态页面</h1><p>接下来我们尝试配置一个简单的静态页面，使用vim对<code>/etc/nginx/conf.d/default.conf</code>进行修改，需要注意的是默认情况下<code>/etc/nginx/conf.d/</code>下面的配置文件只要是<code>.conf</code>即可生效，前面的名称并没有特殊限制，所以最好根据文件的实际用途进行命名方便记忆和管理。</p>
<p>接下来我们在<code>/etc/hosts</code>中将 <code>www.example.com www.example.org www.example.net example.com example.org example.net</code>的DNS解析手动指定为本机IP地址，方便后面使用域名进行配置页面</p>
<h2 id="4-1-default-server"><a href="#4-1-default-server" class="headerlink" title="4.1 default_server"></a>4.1 default_server</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf.d]<span class="comment"># ll</span></span><br><span class="line">总用量 16</span><br><span class="line">-rw-r--r-- 1 root root 1093 3月   4 00:20 default.conf.bak</span><br><span class="line">-rw-r--r-- 1 root root  158 3月  18 00:08 example.com.conf</span><br><span class="line">-rw-r--r-- 1 root root  158 3月  18 00:09 example.net.conf</span><br><span class="line">-rw-r--r-- 1 root root  173 3月  18 00:11 example.org.conf</span><br><span class="line">[root@localhost conf.d]<span class="comment"># cat example.*</span></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name example.com www.example.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /var/www/html;</span><br><span class="line">        index  example.com.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name example.net www.example.net;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /var/www/html;</span><br><span class="line">        index  example.net.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    server_name example.org www.example.org;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /var/www/html;</span><br><span class="line">        index  example.org.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里我们可以看到上面配置了三个server块，分别对应三组域名，三组域名都是指向本机的IP地址，同样都是监听的80端口，其中我们在第三个server块中指定了<code>default_server</code>参数，此时我们访问本机IP，返回的页面就是我们指定了<code>default_server</code>参数的这个页面。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/V9SN9w4cYpqG.png"></p>
<p>如果我们不指定<code>default_server</code>参数，返回的则是默认的第一个页面。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/nrgXs9YImesb.png"></p>
<h2 id="4-2-location"><a href="#4-2-location" class="headerlink" title="4.2 location"></a>4.2 location</h2><p>location块的默认语法如下，<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location">官网文档点这里</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Syntax:	location [ &#x3D; | ~ | ~* | ^~ ] uri &#123; ... &#125;</span><br><span class="line">location @name &#123; ... &#125;</span><br><span class="line">Default: —</span><br><span class="line">Context: server, location</span><br></pre></td></tr></table></figure>

<p>主要作用是根据请求URI设置配置，location可以由前缀字符串或正则表达式定义。</p>
<ul>
<li>正则表达式由前面的<code>~*</code>修饰符（不区分大小写）或<code>~</code>修饰符（不区分大小写）指定。</li>
<li>优先顺序是，nginx首先检查使用前缀字符串定义的位置（前缀位置），其中，将选择并记住具有最长匹配前缀的位置。</li>
<li>然后按照在配置文件中出现的顺序检查正则表达式。</li>
<li>正则表达式的搜索在第一个匹配项上终止，并使用相应的配置。</li>
<li>如果未找到与正则表达式匹配的内容，则使用前面记住的前缀位置的配置。</li>
</ul>
<p>我们来看一下实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name example.com www.example.com;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        root   &#x2F;var&#x2F;www&#x2F;html;</span><br><span class="line">        index  example.com.html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    location &#x2F;images &#123;</span><br><span class="line">        root  &#x2F;var&#x2F;www;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们先来看一个<code>server</code>块，这里我们可以看到里面包含了两个<code>location</code>块，在<code>/var/www/html</code>和<code>/var/www</code>这两个目录下均有一个<code>images</code>文件夹，但是在<code>www</code>目录下的<code>images</code>文件夹没有<code>images2.html</code>这个文件。</p>
<p><img src="https://resource.tinychen.com/blog/20200317/NDKJhkhoG0vG.png"></p>
<p>接着我们尝试访问：</p>
<p><img src="https://resource.tinychen.com/blog/20200317/FPrVs7UyolQD.png"></p>
<p>可以看到因为我们在<code>www</code>目录下的<code>images</code>文件夹没有<code>images2.html</code>这个文件，所以在执行<code>curl example.com/images/images2.html</code>的时候返回了404请求。</p>
<p>所以我们可以得到结论，当访问域名后面的目录（如这里的<code>/images/</code>），如果在<code>server</code>块里面单独定义了一个相关的<code>location</code>块，则只会在这个<code>/images/</code>目录相关<code>location</code>块定义的目录中去查找，不存在则返回404，并不会再去根目录<code>/</code>的<code>location</code>块中的目录中查找。</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\20190829-http-to-nginx\" rel="bookmark">个人博客web服务器换用nginx</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\20200320-nginx05-upstream-keepalive\" rel="bookmark">Nginx篇05——http长连接和keeplive</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\20200320-nginx04-http-map-module\" rel="bookmark">Nginx篇04——map模块</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\20200323-nginx06-sendfile\" rel="bookmark">Nginx篇06——Sendfile指令及其原理</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\20200519-nginx-enable-http2-tls13\" rel="bookmark">nginx启用HTTP2和TLSv1.3</a></div>
    </li>
  </ul>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/web/" rel="tag"># web</a>
              <a href="/tags/nginx/" rel="tag"># nginx</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/20200301-virtualization-intro-kvm-intro/" rel="prev" title="虚拟化技术的演变过程和KVM虚拟化的简介">
      <i class="fa fa-chevron-left"></i> 虚拟化技术的演变过程和KVM虚拟化的简介
    </a></div>
      <div class="post-nav-item">
    <a href="/20200318-nginx02-smooth-weighted-round-robin-balancing/" rel="next" title="Nginx篇02——upstream模块中的加权轮询负载均衡">
      Nginx篇02——upstream模块中的加权轮询负载均衡 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#0%E3%80%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85nginx"><span class="nav-text">0、编译安装nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-text">0.1 准备工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-2-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="nav-text">0.2 编译安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-3-%E6%B7%BB%E5%8A%A0%E6%A8%A1%E5%9D%97"><span class="nav-text">0.3 添加模块</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1%E3%80%81yum%E5%AE%89%E8%A3%85nginx"><span class="nav-text">1、yum安装nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-yum%E4%BB%93%E5%BA%93%E5%BB%BA%E7%AB%8B%E5%92%8C%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE"><span class="nav-text">1.1 yum仓库建立和安装配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-master%E5%92%8Cworker%E8%BF%9B%E7%A8%8B"><span class="nav-text">1.2 master和worker进程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2%E3%80%81nginx%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="nav-text">2、nginx基本配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-nginx%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95"><span class="nav-text">2.1 nginx默认目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-nginx"><span class="nav-text">&#x2F;etc&#x2F;nginx&#x2F;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-nginx-nginx-conf"><span class="nav-text">&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#etc-nginx-conf-d"><span class="nav-text">&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#var-log-nginx"><span class="nav-text">&#x2F;var&#x2F;log&#x2F;nginx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-nginx%E5%91%BD%E4%BB%A4"><span class="nav-text">2.2 nginx命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3%E3%80%81nginx-conf%E6%96%87%E4%BB%B6"><span class="nav-text">3、nginx.conf文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-user"><span class="nav-text">3.1 user</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-worker-processes"><span class="nav-text">3.2 worker_processes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-error-log"><span class="nav-text">3.3 error_log</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-pid"><span class="nav-text">3.4 pid</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-%E5%9D%97%E9%85%8D%E7%BD%AE"><span class="nav-text">3.5 块配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-%E5%8D%95%E4%BD%8D"><span class="nav-text">3.6 单位</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4%E3%80%81nginx%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2"><span class="nav-text">4、nginx配置静态页面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-default-server"><span class="nav-text">4.1 default_server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-location"><span class="nav-text">4.2 location</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="TinyChen"
      src="https://resource.tinychen.com/logo.jpg">
  <p class="site-author-name" itemprop="name">TinyChen</p>
  <div class="site-description" itemprop="description"> </div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">152</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tiny777" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tiny777" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tinyseventh@gmail.com" title="Gmail → mailto:tinyseventh@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-google"></i>Gmail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/tinyseventh/posts" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;tinyseventh&#x2F;posts" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>知乎</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/c3de3c0ad794" title="简书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;c3de3c0ad794" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>简书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_36885515" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_36885515" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>CSDN</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18140640号 </a>
  </div>

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TinyChen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">640k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">9:42</span>
</div>

        








        
      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>














  

  

</body>
</html>
